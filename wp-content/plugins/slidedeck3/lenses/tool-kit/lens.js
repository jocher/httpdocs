!function(a){SlideDeckLens["tool-kit"]=function(s){var e="tool-kit",n=a(s).slidedeck(),t=n.vertical(),r={};r.slidedeck=n.deck,r.frame=r.slidedeck.closest(".lens-"+e),r.slides=n.slides,r.deckWrapper=r.frame.find(".sd-wrapper"),r.horizNav=r.frame.find(".deck-navigation.horizontal"),r.horizNavPrev=r.frame.find(".deck-navigation.horizontal.prev"),r.horizNavNext=r.frame.find(".deck-navigation.horizontal.next"),r.vertNav=r.frame.find(".deck-navigation.vertical"),r.vertNavPrev=r.frame.find(".deck-navigation.vertical.prev"),r.vertNavNext=r.frame.find(".deck-navigation.vertical.next"),r.slidedeck.find(".sd2-slide-text a").addClass("accent-color"),n.loaded(function(s){var e=!1;r.frame.find(".slidesVertical").length&&(e=!0),e&&(r.slides=s.vertical().slides,t.options.scroll=s.options.scroll?!0:!1);var n=function(){r.frame.hasClass("sd2-frame")&&jQuery('<div class="sd-lens-shadow-top"></div><div class="sd-lens-shadow-left"></div><div class="sd-lens-shadow-corner"></div>').appendTo(r.slidedeck)},d=function(){if(!r.frame.hasClass("sd2-nav-none")){if(deckCount=r.slides.length,jQuery('<div class="sd-nav-wrapper"></div>').appendTo(r.deckWrapper),r.navWrapper=r.frame.find(".sd-nav-wrapper"),jQuery('<dl class="sd-nav-deck"></dl>').appendTo(r.navWrapper),r.navDeck=r.navWrapper.find(".sd-nav-deck"),e&&r.frame.hasClass("sd2-nav-thumb")&&(jQuery('<dd><dl class="slidesVertical"></dl></dd>').appendTo(r.navDeck),r.verticalSlides=r.navDeck.find(".slidesVertical")),r.frame.hasClass("sd2-nav-dots")){for(var n=1;deckCount>=n&&10>=n;)jQuery('<dd class="sd-nav-dot"></dd>').appendTo(r.navDeck),n++;if(r.navDots=r.navDeck.find(".sd-nav-dot"),r.navDots.click(function(){a(r.slidedeck).slidedeck().options.autoPlay=!1,s.options.pauseAutoPlay=!0;var n=jQuery(this),d="active";r.frame.hasClass("sd2-nav-hanging")&&(d="accent-color-background"),r.navDots.removeClass("accent-color-background active"),n.addClass(d),e?t.goTo(n.index()+1):s.goTo(n.index()+1)}),e){dotSpacing=parseInt(r.navDots.outerHeight()+10),r.navDots.first().css("margin-top",0);var d=dotSpacing*r.navDots.length;r.navDeck.css({height:d}),r.navWrapper.css({height:d,"margin-top":-1*Math.round(d/2)})}else dotSpacing=parseInt(r.navDots.outerWidth()+10),r.navDeck.css("width",dotSpacing*r.navDots.length-parseInt(r.navDots.last().css("margin-left"),10));if(!r.frame.hasClass("sd2-nav-bar")&&!r.frame.hasClass("sd2-nav-hanging")&&!e){var i=parseInt(r.frame.css("padding-left"),10)+20;if(r.frame.hasClass("sd2-nav-pos-top"))var c=i,v="auto";else var c="auto",v=i;var h=-(r.navWrapper.width()/2);r.frame.hasClass("sd2-nav-dots")&&r.frame.hasClass("sd2-nav-pos-top")&&!r.frame.hasClass("sd2-nav-default")&&(h=0),r.frame.hasClass("sd2-nav-dots")&&r.frame.hasClass("sd2-nav-pos-top")&&r.frame.hasClass("sd2-nav-hanging")&&(c/=2),r.navWrapper.css({"margin-left":h,top:c,bottom:v})}if(r.frame.hasClass("sd2-nav-default")&&!r.frame.hasClass("sd2-title-pos-top")&&!r.frame.hasClass("sd2-hide-title")&&!r.frame.hasClass("sd2-title-pos-bottom")&&r.frame.hasClass("sd2-nav-dots")&&!r.frame.hasClass("sd2-small"))if(e)r.frame.hasClass("sd2-nav-default")&&r.frame.hasClass("sd2-nav-dots")&&!r.frame.hasClass("sd2-small")&&r.navWrapper.css({"margin-top":h+p});else{var f=r.frame.find(".sd-node-title-box").outerWidth();if(r.frame.hasClass("sd2-title-pos-right"))var p=-(f/2);else if(r.frame.hasClass("sd2-title-pos-left"))var p=f/2;r.navWrapper.css({"margin-left":h+p})}var m="active";r.frame.hasClass("sd2-nav-hanging")&&(m="accent-color-background"),a(".sd-nav-dot").eq(s.current-1).addClass(m),e&&o(s.options.startVertical-1)}if(r.frame.hasClass("sd2-nav-hanging")&&r.navWrapper.appendTo(r.frame),r.frame.hasClass("sd2-nav-thumb")){var u=73;r.frame.hasClass("sd2-nav-arrow-style-2")&&r.frame.hasClass("sd2-nav-bar")&&(u=85),e?(r.frame.hasClass("sd2-small")&&(u=55),r.frame.hasClass("sd2-nav-arrow-style-2")&&r.frame.hasClass("sd2-nav-bar")&&r.frame.hasClass("sd2-small")&&(u=58),r.navWrapper.css({"padding-top":u,"padding-bottom":u}),r.navWrapper.css("height",r.slidedeck.outerHeight()),r.navDeck.css("height",r.slidedeck.outerHeight()-2*u),r.navWrapper.css({"margin-top":Math.round(r.navWrapper.outerHeight()*-.5),top:"50%"})):(r.navWrapper.css({"padding-left":u,"padding-right":u}),r.navWrapper.css("width",r.slidedeck.outerWidth()),r.navDeck.css("width",r.slidedeck.outerWidth()-2*u),r.navWrapper.css({"margin-left":Math.round(r.navWrapper.outerWidth()*-.5),left:"50%"})),r.navDeck.addClass("thumb");for(var n=1;deckCount>=n;)jQuery('<span class="sd-thumb sd2-custom-title-font"><span class="number">'+n+'</span><span class="inner-image"></span></span>').appendTo(e?r.verticalSlides:r.navDeck),8>=slidedeck_ie?r.frame.find("span.sd-thumb .inner-image").eq(n-1)[0].style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+r.slides.eq(n-1).attr("data-thumbnail-src")+"', sizingMethod='scale')":r.frame.find("span.sd-thumb .inner-image").eq(n-1).css("background-image","url("+r.slides.eq(n-1).attr("data-thumbnail-src")+")"),n++;if(singleThumb=r.frame.find(".sd-thumb"),e){thumbHeight=singleThumb.height(),thumbSpacing=parseInt(singleThumb.last().css("margin-bottom")),fullThumb=thumbHeight+thumbSpacing,thumbsPerSlide=Math.floor((r.frame.find(".sd-nav-wrapper").height()+thumbSpacing)/fullThumb);var g=r.verticalSlides.children(".sd-thumb")}else{thumbWidth=parseInt(singleThumb.css("width"),10),thumbSpacing=parseInt(singleThumb.last().css("margin-left"),10),fullThumb=thumbWidth+thumbSpacing,thumbsPerSlide=Math.floor((r.frame.find(".sd-nav-wrapper").width()+thumbSpacing)/fullThumb);var g=r.navDeck.children(".sd-thumb")}g.remove();for(var n=0;deckCount>n;)(0==n||n%thumbsPerSlide==0)&&jQuery('<dd class="thumb-slide"></dd>').appendTo(e?r.verticalSlides:r.navDeck),jQuery(g[n]).appendTo(r.navDeck.find(".thumb-slide").last()),n++;e?(r.verticalSlides.children("dd").wrapInner('<div class="nav-centered"></div>'),r.navDeck.find(".nav-centered").each(function(){var s=Math.round(parseInt(a(this).find(".sd-thumb").last().css("margin-bottom"))/2);a(this).css({"margin-top":a(this).outerHeight()*-.5+s,"margin-left":a(this).outerWidth()*-.5})})):(r.navDeck.children("dd").wrapInner('<div class="nav-centered"></div>'),r.navDeck.find(".nav-centered").each(function(){var s=a(this),e=s.find(".sd-thumb").length,n=fullThumb*e;s.css("width",n)})),r.navDeck.show();var k=!1;s.options.cycle&&(k=!0);var b={hideSpines:!0,cycle:k,keys:!1,scroll:!1};r.navSlideDeck=r.navDeck.slidedeck(b),r.navSlideDeck.vertical(b),r.thumbs=r.navDeck.find(".sd-thumb"),r.navDeck.delegate(".sd-thumb","click",function(n){n.preventDefault();var d=a.data(this,"$this"),i=a.data(this,"thumbIndex");this.style.backgroundColor="",r.thumbs.removeClass("active accent-color-background"),d.addClass("active accent-color-background"),e?(a(r.slidedeck).slidedeck().options.autoPlay=!1,s.options.pauseAutoPlay=!0,t.goTo(i+1)):s.goTo(i+1)}).delegate(".sd-thumb","mouseenter",function(){var s=a.data(this,"$this"),e=a.data(this,"thumbIndex");s||(s=a(this),a.data(this,"$this",s)),e||(e=r.thumbs.index(s),a.data(this,"thumbIndex",e));var n=s.css("background-color"),t=Raphael.getRGB(n),d=Raphael.rgb2hsl(t.r,t.g,t.b);d.l=Math.min(100,120*d.l)/100;var i=Raphael.hsl(d.h,d.s,d.l);s.css("background-color",i)}).delegate(".sd-thumb","mouseleave",function(){this.style.backgroundColor=""}),r.navSlides=r.navDeck.find("dd"),e&&(r.navSlides=r.navDeck.find(".slidesVertical dd")),r.navSlides.length>1&&(jQuery('<a class="deck-navigation-arrows prev" href="#prev" target="_blank"><span>Prev</span></a><a class="deck-navigation-arrows next" href="#next" target="_blank"><span>Next</span></a>').appendTo(r.navWrapper),r.navArrows=r.navWrapper.find(".deck-navigation-arrows"),r.navArrows.click(function(s){switch(s.preventDefault(),a.data(r.navDeck[0],"pauseAutoPaginate",!0),this.href.split("#")[1]){case"next":r.navSlideDeck.next();break;case"prev":r.navSlideDeck.prev()}})),r.frame.find(".sd-nav-deck .sd-thumb").eq(s.current-1).addClass("active accent-color-background"),e?l(s.options.startVertical-1):r.navSlideDeck.goTo(r.navDeck.find(".chrome-thumb.active").parents("dd").index()+1)}}},i=function(){e&&(s=t);var n=s.options.before;if(e&&r.frame.hasClass("sd2-nav-thumb")&&(r.navSlideDeck=r.navSlideDeck.vertical()),s.options.before=function(s){if("function"==typeof n&&n(s),r.frame.hasClass("sd2-nav-dots")){var t="active";r.frame.hasClass("sd2-nav-hanging")&&(t="accent-color-background"),r.navDots.removeClass(t),r.navDots.eq(s.current-1).addClass(t),o(e?s.current:s.current-1)}else r.frame.hasClass("sd2-nav-thumb")&&(l(s.current),a.data(r.navDeck[0],"pauseAutoPaginate")||r.navSlideDeck.goTo(r.navDeck.find(".sd-thumb.active").parents("dd").index()+1),a.data(r.navDeck[0],"pauseAutoPaginate",!1))},e){var d=t.options.complete;t.options.complete=function(a){"function"==typeof d&&d(a),r.frame.hasClass("sd2-nav-dots")||r.frame.hasClass("sd2-nav-thumb")}}},o=function(s){if(r.navDots){var e="active";r.frame.hasClass("sd2-nav-hanging")&&(e="accent-color-background"),r.navDots.removeClass("accent-color-background active"),a(r.navDots[s]).addClass(e)}},l=function(s){if(r.thumbs){e||s--;var n="accent-color-background active";r.thumbs.removeClass(n),a(r.thumbs[s]).addClass(n)}},c=function(){"undefined"!=typeof a.event.special.mousewheel&&r.frame.bind("mousewheel",function(a,s){t.options&&t.options.scroll&&(1==s?o(t.current):-1==s&&o(t.current))})},v=function(){"undefined"!=typeof a.event.special.mousewheel&&r.frame.bind("mousewheel",function(a,s){t.options&&t.options.scroll&&(1==s?l(t.current):-1==s&&l(t.current))})},h=function(){if(r.frame.hasClass("sd2-nav-hanging"),r.frame.hasClass("sd2-frame")&&r.frame.hasClass("sd2-nav-pos-top")&&r.frame.hasClass("sd2-nav-bar")&&r.frame.css("padding-bottom",parseInt(r.frame.css("padding-left"),10)),r.frame.hasClass("sd2-nav-pos-top")&&r.frame.hasClass("sd2-frame")&&r.frame.hasClass("sd2-nav-hanging")&&r.navWrapper.appendTo(r.frame),r.frame.hasClass("sd2-nav-thumb")&&r.frame.hasClass("sd2-nav-arrow-style-2"))if(e){var a=r.navWrapper.outerWidth();r.navWrapper.find(".deck-navigation-arrows").css("height",a)}else{var s=r.navWrapper.outerHeight();r.navWrapper.find(".deck-navigation-arrows").css("width",s)}var n,t=0;r.frame.hasClass("sd2-small")?n=3:r.frame.hasClass("sd2-medium")?n=10:r.frame.hasClass("sd2-large")&&(n=10),r.frame.hasClass("sd2-frame")&&(t=5),r.frame.hasClass("sd2-frame")&&(r.horizNavPrev.css("left",parseInt(r.horizNavPrev.css("left"))+n),r.horizNavNext.css("right",parseInt(r.horizNavNext.css("right"))+n)),r.frame.hasClass("sd2-no-nav")||(r.frame.hasClass("sd2-nav-pos-top")?r.frame.is(".sd2-nav-bar")&&r.horizNav.css("marginTop",parseInt(r.horizNav.css("marginTop"))+Math.round(r.frame.find(".sd-nav-wrapper").outerHeight()/2)-t):(!r.frame.hasClass("sd2-frame")||r.frame.hasClass("sd2-nav-bar"))&&r.frame.is(".sd2-nav-bar, .sd2-nav-hanging")&&r.horizNav.css("marginTop",parseInt(r.horizNav.css("marginTop"))-Math.round(r.frame.find(".sd-nav-wrapper").outerHeight()/2)+t))};d(),n(),i(),h(),c(),v()})},a(document).ready(function(){a(".lens-tool-kit .slidedeck").each(function(){("undefined"==typeof a.data(this,"lens-tool-kit")||null==a.data(this,"lens-tool-kit"))&&a.data(this,"lens-tool-kit",new SlideDeckLens["tool-kit"](this))})})}(jQuery);